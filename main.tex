% !TEX --enable-write18
\documentclass[12pt,a4paper]{report}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%all_packages%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[table, dvipsnames, svgnames]{xcolor} 
\usepackage[T1]{fontenc}
\usepackage{lmodern} % needed on MikTeX
\usepackage[utf8]{inputenc}
\usepackage{imakeidx}
\usepackage[a4paper,portrait,margin=1in,headheight=15pt]{geometry}
\usepackage{graphicx}
\usepackage{appendix}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{titlesec}
\usepackage{siunitx}
\usepackage[hidelinks,pdfa,pdfusetitle,pageanchor]{hyperref}
\usepackage[toc]{glossaries}
\usepackage{pdfpages,caption}
\usepackage{array}
\usepackage{float}
\usepackage{fancyhdr}
\usepackage{longtable}
\usepackage{siunitx}
\usepackage{enumitem}
\usepackage{ulem}
\usepackage{multirow}
\usepackage{afterpage}
\usepackage{rotating}
\usepackage{acronym}
\usepackage{tfrupee}  
\usepackage{etoolbox}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{textcomp}
\usepackage{tikz}
\usetikzlibrary{automata, positioning}

\usepackage[abspage,user,lastpage]{zref}
\usepackage[hang]{footmisc}       %for aligning footnote

\usepackage[backend=biber,refsection=section,sorting=none,style=numeric, defernumbers=true,safeinputenc]
{biblatex}
\makeindex[columns = 2, title = AlphabeticalIndex, intoc, options =-s indcomma]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%preamble and packages for first page%%%%%%%%%%%%%%%%%%%%%%%%%
% \usepackage[dvipsnames, svgnames]{xcolor}
\usepackage{tikz}
\usepackage{xspace}
\usepackage{pdfpages}
\usepackage{afterpage}
\usepackage{graphicx}
\usepackage{hyperxmp}
\usepackage{url}
\urlstyle{rm}
\def\UrlFont{\bfseries\rmfamily\color{blue}} 
\usepackage{ccicons} % use Creative Commons icons
\usepackage[absolute]{textpos} % exact position logo
\usepackage{amsmath} % https://ctan.org/pkg/amsmath for mathematical features
\makeindex[columns = 2, title = Alphabetical Index, intoc, options =-s indcomma]

%% Fonts and typography
%\usepackage{helvet}           
\usepackage[scaled=0.95]{helvet} % Helvetica (kerning adjusted)
\renewcommand{\sfdefault}{phv}     % Helvetica
\usepackage[final]{microtype}  % Improved typography

\DeclareUnicodeCharacter{2060}{}
\definecolor{tuberlingrayarea}{RGB}{249 247 247} % gray #F9F7F7 for background
\definecolor{tuberlindarkgray}{RGB}{91 75 75} % gray #5B4B4B for headings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% to remove the chapter word in the pages
\titleformat{\chapter}[display]
{\normalfont\bfseries}{}{0pt}{\Huge}

% The following definition is copied from authortitle.bbx/authoryear.bbx
\defbibenvironment{nolabelbib}
  {\list
     {}
     {\setlength{\leftmargin}{\bibhang}%
      \setlength{\itemindent}{-\leftmargin}%
      \setlength{\itemsep}{\bibitemsep}%
      \setlength{\parsep}{\bibparsep}}}
  {\endlist}
  {\item}

% adding bibliography sources
\addbibresource{Files/Chapters/Appendices/references.bib}
\nocite{*}

% Page style
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\thepage}
\fancyhead[L]{\nouppercase{\leftmark}}


%footnote style
\setlength\footnotemargin{10pt}
\makenoidxglossaries
\input{Files/Chapters/Introduction/Glossary}

%defining new alignment
\newcolumntype{n}{>{\centering} m{5.5cm}}
\newcolumntype{e}{>{\raggedleft} m{3.1cm}}
\newcolumntype{E}{>{\raggedleft} m{5.1cm}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%             Landscape Environment                         %%%
%%%        (Must load etoolbox package before)                %%%
%%%    And use /savegeometry before the using landscape page  %%%
%%%      and use /loadgeometry after the landscape page       %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
 \def\ifGm@preamble#1{\@firstofone}
  \appto\restoregeometry{%
     \pdfpagewidth=\paperwidth
     \pdfpageheight=\paperheight}
 \apptocmd\newgeometry{%
    \pdfpagewidth=\paperwidth
    \pdfpageheight=\paperheight}{}{}
 \makeatother


\newenvironment{landscapes}{
    \newpage
    \newgeometry{margin=1in,landscape}  
}{%
\newpage
}

\fancypagestyle{uselscape}{
	\fancyhf{}
	\fancyhead[R]{\thepage}
	\fancyhead[L]{\nouppercase{\rightmark}}
	\fancyheadoffset[R]{0mm}
	}

%%%%%%%%%%%%%%%%%%%%%%%% Start of Document %%%%%%%%%%%%%%%%%%%%

\begin{document}
\input{Files/Chapters/Introduction/Firstpage}
\pagenumbering{roman}
\tableofcontents
\pagestyle{fancy}
\chapter{Introduction}

\input{Files/Chapters/Introduction/Members}
{\tiny \textcolor{white}{\ac{IF}}}


\listoftables
\addcontentsline{toc}{section}{List of Tables}
\listoffigures
\addcontentsline{toc}{section}{List of Figures}

\newpage
\section{Acronyms}
%adding the acromyns
\input{Files/Chapters/Introduction/acronym.tex}

%\newpage

\input{Files/Chapters/Introduction/MindMaps}
%\newpage

\input{Files/Chapters/Introduction/PM}

\input{Files/Chapters/Introduction/Resources}



\input{Files/Chapters/Introduction/Abstract}


\pagenumbering{arabic}
\input{Files/Chapters/Introduction/Motivation}



\pagebreak

%%%%%%%%%% Requirements %%%%%%%%%%%%%%%%


\chapter{Requirements}
\input{Files/Chapters/Requirements/Functional}
\input{Files/Chapters/Requirements/Logistical}
\input{Files/Chapters/Requirements/Interface}
\input{Files/Chapters/Requirements/Readability}
\input{Files/Chapters/Requirements/Power}
\input{Files/Chapters/Requirements/Maintenance}



%%%%%%%%%% Specifications %%%%%%%%%%%%%%%%


\chapter{Specifications}
\input{Files/Chapters/Specification/Buses}
\input{Files/Chapters/Specification/Frontend}
\input{Files/Chapters/Specification/Cost}
\input{Files/Chapters/Specification/Manpower}


\chapter{Design}
\input{Files/Chapters/Design/Process}
\input{Files/Chapters/Design/Protocol}
\input{Files/Chapters/Design/Backend}
\input{Files/Chapters/Design/Components}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\printnoidxglossaries
%%%%%% Appendices %%%%

\fancyhf{}
\fancyhead[R]{\thepage}
\fancyhead[L]{}

\chapter*{References}
\addcontentsline{toc}{chapter}{References}
\hypertarget{QS}{}

\vbox{\printbibliography[keyword={cite},title={Quoted Sources}]}
\addcontentsline{toc}{section}{Quoted Sources}
\addcontentsline{toc}{section}{Background Research}

\vbox{
  \printbibliography[env=nolabelbib, keyword={no_cite}, title={Background Research}]
  }

\printbibliography[env=nolabelbib, keyword={software}, title={Softwares Used}]

\addcontentsline{toc}{section}{Softwares Used}



\chapter*{Appendices}
\begingroup
%\setcounter{section}{0}
\renewcommand{\thesection}{\Alph{section}}
\addcontentsline{toc}{chapter}{Appendices}
\section*{A. Document Statistics}
\addcontentsline{toc}{section}{A. Document Statistics}
\input{Files/Chapters/Appendices/Document_Statistics}
\newpage
\section*{B. Readability Index}
\addcontentsline{toc}{section}{B. Readability Index}
\input{Files/Chapters/Appendices/Readability_Indices}
\newpage
\section*{C. Document Information}
\addcontentsline{toc}{section}{C. Document Information}
\input{Files/Chapters/Appendices/Document_ID}
\endgroup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\printindex
\end{document}
